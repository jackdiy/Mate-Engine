# Mate Engine - 网页版VRM查看器 🎭

一个现代化的纯前端Web应用，用于在浏览器中查看和交互VRM 3D角色模型。采用玻璃拟态设计，支持动画、表情、服装切换和音乐同步舞蹈。

![界面预览](https://github.com/user-attachments/assets/f6ee2d84-cf8d-4720-8e66-ceb8e187f9cb)

---

## ✨ 核心特性

### 🎨 现代化设计
- **玻璃拟态UI** - 半透明磨砂玻璃效果
- **多巴胺配色** - 鲜艳渐变色彩方案
- **流畅动画** - 微交互和过渡效果
- **响应式布局** - 适配各种屏幕尺寸
- **深色/浅色模式** - 自动切换主题

### 👤 角色系统
- **4个角色支持**
  - Lazuli（60MB猫娘角色）
  - Aldina（13MB轻量角色）
  - Zome（默认角色）
  - 自定义上传（VRM/ME格式）

### 💃 动画系统
- **6种预设动画**
  - 待机（呼吸动画）
  - 舞蹈1（旋转弹跳）
  - 舞蹈2（能量全开）
  - 挥手（打招呼）
  - 欢喜（蹦蹦跳跳）
  - 跳跃（跳跃动作）
  
- **音乐同步** - 上传BGM，角色随音乐起舞
- **平滑过渡** - AnimationMixer混合系统

### 😊 表情控制
- 6种预设表情（中性、开心、伤心、生气、惊讶、有趣）
- VRM混合形状支持
- 实时表情切换

### 👗 服装系统
- 自动检测服装网格
- 实时切换显示/隐藏
- 动态生成控制界面

### 📷 相机与效果
- **相机控制**
  - 拖拽旋转视角
  - 滚轮缩放
  - 距离和高度调节
  - 一键重置
  
- **视觉效果**
  - 实时阴影
  - 自动旋转
  - 鼠标头部跟踪
  - 截图功能

### 🎵 音频系统
- 支持多种音频格式（MP3, WAV, OGG等）
- 音量控制
- 音乐循环播放
- 舞蹈动画同步

---

## 🚀 快速开始

### 方法一：直接打开（最简单）

1. 下载或克隆本仓库
2. 用浏览器直接打开 `index.html`
3. 点击角色卡片加载模型
4. 开始体验！

### 方法二：本地服务器（推荐）

**使用Python：**
```bash
# 进入项目目录
cd Mate-Engine

# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000

# 访问 http://localhost:8000
```

**使用Node.js：**
```bash
# 安装http-server
npm install -g http-server

# 启动服务器
http-server -p 8000

# 访问 http://localhost:8000
```

**使用PHP：**
```bash
php -S localhost:8000
```

---

## 📖 使用说明

### 1. 加载角色

**预设角色：**
- 点击 Lazuli、Aldina 或 Zome 卡片
- 等待模型加载（5-10秒）
- 模型出现在场景中

**自定义角色：**
- 点击"自定义"卡片
- 选择 VRM 或 ME 文件
- 上传并加载

### 2. 播放动画

- 点击动画按钮（待机、舞蹈1、舞蹈2等）
- 动画立即开始播放
- 可随时切换不同动画

### 3. 音乐舞蹈

1. 点击"选择音乐"上传BGM
2. 点击"播放音乐舞蹈"
3. 角色随音乐起舞
4. 调节音量滑块控制音量
5. 点击"停止"结束播放

### 4. 切换表情

- 点击表情按钮（开心、伤心等）
- 角色表情实时改变
- 支持VRM混合形状系统

### 5. 服装控制

- 加载模型后显示可用服装
- 切换开关显示/隐藏
- 实时预览效果

### 6. 相机操作

**鼠标控制：**
- **左键拖拽** - 旋转视角
- **滚轮** - 缩放距离
- **右键拖拽** - 平移视图（部分浏览器）

**滑块控制：**
- 相机距离（0.5m - 5m）
- 相机高度（0.5m - 2.5m）

**开关选项：**
- 自动旋转 - 持续旋转模型
- 鼠标跟踪 - 头部跟随鼠标
- 阴影效果 - 开启/关闭阴影

**其他功能：**
- 重置相机 - 恢复默认位置
- 截图 - 保存当前画面

---

## 📁 项目结构

```
Mate-Engine/
├── index.html              # 主页面（玻璃拟态UI）
├── styles.css              # 样式表（渐变+动画）
├── app.js                  # 核心逻辑（26KB）
├── ANDROID_移植报告.md      # Android移植方案
├── README.md               # 本文档
└── Assets/                 # 模型资源
    └── MATE ENGINE - Avatar/
        ├── DLCs/
        │   ├── Lazuli_VRM.vrm    (60MB)
        │   ├── aldina.vrm        (13MB)
        │   └── ME_02/Ayrina/     (ME格式)
        └── Zome.vrm
```

---

## 🛠️ 技术栈

### 前端技术
- **HTML5** - 语义化标记
- **CSS3** - 玻璃拟态设计
- **JavaScript ES6+** - 模块化编程

### 3D渲染
- **Three.js** v0.169.0 - WebGL 3D引擎
- **@pixiv/three-vrm** v3.1.0 - VRM加载器
- **OrbitControls** - 相机控制

### 设计系统
- **Inter字体** - Google Fonts
- **玻璃拟态** - Glassmorphism
- **多巴胺配色** - 鲜艳渐变
- **CSS Grid/Flexbox** - 响应式布局

---

## 🎨 设计亮点

### 玻璃拟态效果
```css
background: rgba(255, 255, 255, 0.1);
backdrop-filter: blur(8px);
border: 1px solid rgba(255, 255, 255, 0.2);
box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
```

### 动态渐变背景
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
background-size: 400% 400%;
animation: gradientShift 15s ease infinite;
```

### 微交互动画
- 悬停放大效果
- 平滑过渡动画
- 加载进度条
- 按钮反馈

---

## 📱 浏览器兼容性

| 浏览器 | 版本 | 支持度 |
|--------|------|--------|
| Chrome | 90+ | ✅ 完美 |
| Edge | 90+ | ✅ 完美 |
| Firefox | 88+ | ✅ 良好 |
| Safari | 15+ | ✅ 良好 |
| Opera | 最新 | ✅ 良好 |
| 移动Chrome | 最新 | ⚠️ 有限 |
| 移动Safari | 最新 | ⚠️ 有限 |

**系统要求：**
- WebGL 2.0 支持
- 4GB+ RAM
- 现代GPU（集显可用）

---

## 🔧 高级配置

### 性能优化

**针对低端设备：**
```javascript
// 在 app.js 中修改
state.renderer.setPixelRatio(1); // 降低分辨率
directionalLight.shadow.mapSize.width = 1024; // 降低阴影质量
```

### 自定义配置

**修改默认角色：**
```javascript
// 在 init() 函数中
setTimeout(() => {
    loadCharacter('aldina'); // 改为 aldina 或 zome
}, 500);
```

**调整相机位置：**
```javascript
state.camera.position.set(0, 1.4, 2.0); // X, Y, Z
state.controls.target.set(0, 1.2, 0);
```

---

## 📊 性能指标

### 加载时间

| 模型 | 文件大小 | 加载时间 | 内存占用 |
|------|----------|----------|----------|
| Lazuli | 60MB | 5-10秒 | ~200MB |
| Aldina | 13MB | 2-3秒 | ~80MB |
| Zome | 变化 | 2-5秒 | ~100MB |

### 运行性能

| 设备类型 | FPS | CPU占用 | GPU占用 |
|---------|-----|---------|---------|
| 高端台式机 | 60 | 10-15% | 20-30% |
| 中端笔记本 | 50-60 | 15-25% | 30-50% |
| 低端设备 | 30-45 | 25-40% | 50-70% |

---

## 🐛 常见问题

### 模型无法加载

**问题：** 点击角色卡片无反应

**解决：**
1. 检查浏览器控制台（F12）
2. 确认网络连接（CDN需要联网）
3. 尝试使用本地服务器
4. 清除浏览器缓存

### 动画不流畅

**问题：** FPS低于30

**解决：**
1. 关闭其他浏览器标签页
2. 禁用自动旋转和阴影
3. 降低浏览器缩放比例
4. 更新显卡驱动

### 音乐无法播放

**问题：** 上传后没有声音

**解决：**
1. 检查浏览器音量设置
2. 确认文件格式支持
3. 查看浏览器自动播放策略
4. 尝试手动点击播放

### CDN加载失败

**问题：** Three.js无法加载

**解决：**
1. 检查网络连接
2. 使用VPN（如被墙）
3. 下载本地库（见下文）

---

## 💾 离线使用

### 下载Three.js本地库

```bash
# 创建libs目录
mkdir libs

# 下载Three.js
wget https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js -O libs/three.module.js

# 下载VRM loader
wget https://cdn.jsdelivr.net/npm/@pixiv/three-vrm@3.1.0/lib/three-vrm.module.js -O libs/three-vrm.module.js
```

### 修改index.html

```html
<!-- 替换importmap -->
<script type="importmap">
{
    "imports": {
        "three": "./libs/three.module.js",
        "three/addons/": "./libs/three-addons/",
        "@pixiv/three-vrm": "./libs/three-vrm.module.js"
    }
}
</script>
```

---

## 🎯 使用场景

### 个人用户
- ✅ 预览VRM模型
- ✅ 角色展示
- ✅ 截图分享
- ✅ 动画测试

### 开发者
- ✅ VRM格式验证
- ✅ 动画原型设计
- ✅ 性能测试
- ✅ 跨平台兼容性检查

### 创作者
- ✅ 角色设计预览
- ✅ 服装搭配测试
- ✅ 表情调试
- ✅ 动作参考

---

## 📚 相关资源

### 官方文档
- [Three.js文档](https://threejs.org/docs/)
- [VRM规范](https://vrm.dev/)
- [@pixiv/three-vrm](https://github.com/pixiv/three-vrm)

### 模型资源
- [VRoid Hub](https://hub.vroid.com/) - VRM模型分享平台
- [Booth.pm](https://booth.pm/) - 搜索"VRM"
- [VRoid Studio](https://vroid.com/studio) - 创建自己的VRM

### 学习资料
- [VRM格式创建指南](https://vrm.dev/en/vrm/how_to_make_vrm/)
- [Three.js入门教程](https://threejs.org/manual/)
- [WebGL基础](https://webglfundamentals.org/)

---

## 🤝 贡献指南

### 报告问题
1. 前往 [Issues页面](https://github.com/jackdiy/Mate-Engine/issues)
2. 描述问题（包含截图和错误信息）
3. 提供浏览器和系统信息

### 提交改进
1. Fork本仓库
2. 创建功能分支
3. 提交Pull Request
4. 等待审核

---

## 📄 许可证

### 代码许可
- **本Web应用：** MIT License（自由使用）
- **Three.js：** MIT License
- **@pixiv/three-vrm：** MIT License

### 模型许可
- **Lazuli模型：** © Yorshka Shop - 仅供演示
- **其他模型：** 请查看各自许可证

**重要：** 请勿重新分发Lazuli模型！

---

## 🔮 未来计划

### 短期（1-2个月）
- [ ] 更多动画预设
- [ ] 粒子效果系统
- [ ] 背景自定义
- [ ] 移动端优化

### 中期（3-6个月）
- [ ] VMD动画导入
- [ ] 多角色同屏
- [ ] 实时协作
- [ ] VR/AR支持

### 长期（6个月+）
- [ ] Android应用
- [ ] iOS应用
- [ ] AI驱动动画
- [ ] 社交分享功能

---

## 📞 联系方式

- **项目主页：** https://github.com/jackdiy/Mate-Engine
- **问题反馈：** GitHub Issues
- **讨论区：** GitHub Discussions

---

## 🌟 致谢

- **Three.js团队** - 优秀的3D引擎
- **Pixiv团队** - VRM加载器
- **Yorshka Shop** - Lazuli模型
- **社区贡献者** - 持续支持

---

## 📈 项目统计

- **代码量：** ~500行（JavaScript）
- **CSS样式：** ~900行
- **文档：** 15000+字
- **支持角色：** 4个
- **动画数量：** 6种
- **表情预设：** 6个

---

**享受你的虚拟伙伴！🎭✨**

*最后更新：2025-12-07*
